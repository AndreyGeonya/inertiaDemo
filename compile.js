var h=void 0,i=!0,j=null,p=!1,r,t=this;function aa(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&u(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function v(){}function ba(a){a.ka=function(){return a.ib?a.ib:a.ib=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return a!==h}function da(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ea(a){return"string"==typeof a}function fa(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&a!=j||"function"==b}function x(a){return a[ha]||(a[ha]=++ia)}var ha="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ia=0;
function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function la(a,b,c){la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return la.apply(j,arguments)}
function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ta=Date.now||function(){return+new Date};function z(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;var B=Array.prototype,Aa=B.indexOf?function(a,b,c){return B.indexOf.call(a,b,c)}:function(a,b,c){c=c==j?0:0>c?Math.max(0,a.length+c):c;if(ea(a))return!ea(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},C=B.forEach?function(a,b,c){B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ba=B.map?function(a,b,c){return B.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ea(a)?a.split(""):
a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ca=B.some?function(a,b,c){return B.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return i;return p};function Da(a,b,c,d){B.splice.apply(a,Ea(arguments,1))}function Ea(a,b,c){return 2>=arguments.length?B.slice.call(a,b):B.slice.call(a,b,c)}function Fa(a,b){return a>b?1:a<b?-1:0};function Ga(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Ha(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ia="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ja(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ia.length;f++)c=Ia[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ka,La,Ma,Na,Oa,Pa,Qa;function Ra(){return t.navigator?t.navigator.userAgent:j}function Sa(){return t.navigator}Na=Ma=La=Ka=p;var Ta;if(Ta=Ra()){var Ua=Sa();Ka=0==Ta.indexOf("Opera");La=!Ka&&-1!=Ta.indexOf("MSIE");Ma=!Ka&&-1!=Ta.indexOf("WebKit");Na=!Ka&&!Ma&&"Gecko"==Ua.product}var Va=Ka,D=La,G=Na,H=Ma,Wa,Xa=Sa();Wa=Xa&&Xa.platform||"";Oa=-1!=Wa.indexOf("Mac");Pa=-1!=Wa.indexOf("Win");Qa=-1!=Wa.indexOf("Linux");var Ya=!!Sa()&&-1!=(Sa().appVersion||"").indexOf("X11"),Za;
a:{var $a="",ab;if(Va&&t.opera)var bb=t.opera.version,$a="function"==typeof bb?bb():bb;else if(G?ab=/rv\:([^\);]+)(\)|;)/:D?ab=/MSIE\s+([^\);]+)(\)|;)/:H&&(ab=/WebKit\/(\S+)/),ab)var cb=ab.exec(Ra()),$a=cb?cb[1]:"";if(D){var db,eb=t.document;db=eb?eb.documentMode:h;if(db>parseFloat($a)){Za=String(db);break a}}Za=$a}var fb={};
function L(a){var b;if(!(b=fb[a])){b=0;for(var c=String(Za).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),s=RegExp("(\\d*)(\\D*)","g");do{var n=m.exec(g)||["","",""],l=s.exec(k)||["","",""];if(0==n[0].length&&0==l[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==l[1].length?0:parseInt(l[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==l[1].length?0:parseInt(l[1],10))?1:0)||((0==n[2].length)<(0==l[2].length)?-1:(0==n[2].length)>(0==l[2].length)?1:0)||(n[2]<l[2]?-1:n[2]>l[2]?1:0)}while(0==b)}b=fb[a]=0<=b}return b}var gb={};function hb(a){return gb[a]||(gb[a]=D&&!!document.documentMode&&document.documentMode>=a)};function ib(){this.a=ta()}new ib;ib.prototype.set=function(a){this.a=a};function M(){0!=jb&&(this.yc=Error().stack,kb[x(this)]=this)}var jb=0,kb={};M.prototype.qb=p;M.prototype.Da=function(){if(!this.qb&&(this.qb=i,this.k(),0!=jb)){var a=x(this);delete kb[a]}};function lb(a,b){a.N||(a.N=[]);a.N.push(b)}M.prototype.k=function(){this.N&&mb.apply(j,this.N);if(this.wb)for(;this.wb.length;)this.wb.shift()()};function nb(a){a&&"function"==typeof a.Da&&a.Da()}function mb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];da(d)?mb.apply(j,d):nb(d)}};function ob(a,b){this.type=a;this.b=this.target=b}r=ob.prototype;r.Da=function(){};r.O=p;r.ma=p;r.ya=i;r.Fa=function(){this.O=i};r.o=function(){this.ma=i;this.ya=p};function pb(a){a.Fa()};var qb=!D||hb(9),rb=!D||hb(9),sb=D&&!L("9");!H||L("528");G&&L("1.9b")||D&&L("8")||Va&&L("9.5")||H&&L("528");G&&!L("8")||D&&L("9");function tb(a){tb[" "](a);return a}tb[" "]=v;function ub(a,b){a&&vb(this,a,b)}z(ub,ob);var wb=[1,4,2];r=ub.prototype;r.target=j;r.Nb=j;r.Lb=0;r.Mb=0;r.clientX=0;r.clientY=0;r.Ob=0;r.Pb=0;r.Jb=0;r.V=0;r.Ea=0;r.la=p;r.C=p;r.M=p;r.Kb=p;r.va=p;r.r=j;
function vb(a,b,c){var d=a.type=b.type;ob.call(a,d);a.target=b.target||b.srcElement;a.b=c;if(c=b.relatedTarget){if(G){var e;a:{try{tb(c.nodeName);e=i;break a}catch(f){}e=p}e||(c=j)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.Nb=c;a.Lb=H||b.offsetX!==h?b.offsetX:b.layerX;a.Mb=H||b.offsetY!==h?b.offsetY:b.layerY;a.clientX=b.clientX!==h?b.clientX:b.pageX;a.clientY=b.clientY!==h?b.clientY:b.pageY;a.Ob=b.screenX||0;a.Pb=b.screenY||0;a.Jb=b.button;a.V=b.keyCode||0;a.Ea=b.charCode||
("keypress"==d?b.keyCode:0);a.la=b.ctrlKey;a.C=b.altKey;a.M=b.shiftKey;a.Kb=b.metaKey;a.va=Oa?b.metaKey:b.ctrlKey;a.d=b.state;a.r=b;b.defaultPrevented&&a.o();delete a.O}function xb(a){return(qb?0==a.r.button:"click"==a.type?i:!!(a.r.button&wb[0]))&&!(H&&Oa&&a.la)}r.Fa=function(){ub.h.Fa.call(this);this.r.stopPropagation?this.r.stopPropagation():this.r.cancelBubble=i};
r.o=function(){ub.h.o.call(this);var a=this.r;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,sb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};r.Ib=function(){return this.r};function yb(){}var zb=0;yb.prototype.key=0;yb.prototype.Z=p;yb.prototype.a=p;yb.prototype.handleEvent=function(a){return this.b?this.ia.call(this.La||this.src,a):this.ia.handleEvent.call(this.ia,a)};var Ab={},Bb={},Cb={},Db={};
function N(a,b,c,d,e){if(b){if("array"==ca(b)){for(var f=0;f<b.length;f++)N(a,b[f],c,d,e);return j}var d=!!d,g=Bb;b in g||(g[b]={v:0,u:0});g=g[b];d in g||(g[d]={v:0,u:0},g.v++);var g=g[d],k=x(a),m;g.u++;if(g[k]){m=g[k];for(f=0;f<m.length;f++)if(g=m[f],g.ia==c&&g.La==e){if(g.Z)break;return m[f].key}}else m=g[k]=[],g.v++;var s=Eb,n=rb?function(a){return s.call(n.src,n.key,a)}:function(a){a=s.call(n.src,n.key,a);if(!a)return a},f=n;f.src=a;var l=g=new yb;if(fa(c))l.b=i;else if(c&&c.handleEvent&&fa(c.handleEvent))l.b=
p;else throw Error("Invalid listener argument");l.ia=c;l.c=f;l.src=a;l.type=b;l.capture=!!d;l.La=e;l.a=p;l.key=++zb;l.Z=p;c=g.key;f.key=c;m.push(g);Ab[c]=g;Cb[k]||(Cb[k]=[]);Cb[k].push(g);a.addEventListener?(a==t||!a.$a)&&a.addEventListener(b,f,d):a.attachEvent(b in Db?Db[b]:Db[b]="on"+b,f);return c}throw Error("Invalid event type");}function Fb(a,b,c,d,e){if("array"==ca(b)){for(var f=0;f<b.length;f++)Fb(a,b[f],c,d,e);return j}a=N(a,b,c,d,e);Ab[a].a=i;return a}
function Gb(a,b,c,d,e){if("array"==ca(b))for(var f=0;f<b.length;f++)Gb(a,b[f],c,d,e);else{d=!!d;a:{f=Bb;if(b in f&&(f=f[b],d in f&&(f=f[d],a=x(a),f[a]))){a=f[a];break a}a=j}if(a)for(f=0;f<a.length;f++)if(a[f].ia==c&&a[f].capture==d&&a[f].La==e){P(a[f].key);break}}}
function P(a){if(!Ab[a])return p;var b=Ab[a];if(b.Z)return p;var c=b.src,d=b.type,e=b.c,f=b.capture;c.removeEventListener?(c==t||!c.$a)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Db?Db[d]:Db[d]="on"+d,e);c=x(c);if(Cb[c]){var e=Cb[c],g=Aa(e,b);0<=g&&B.splice.call(e,g,1);0==e.length&&delete Cb[c]}b.Z=i;if(b=Bb[d][f][c])b.mb=i,Hb(d,f,c,b);delete Ab[a];return i}
function Hb(a,b,c,d){if(!d.ta&&d.mb){for(var e=0,f=0;e<d.length;e++)d[e].Z?d[e].c.src=j:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.mb=p;0==f&&(delete Bb[a][b][c],Bb[a][b].v--,0==Bb[a][b].v&&(delete Bb[a][b],Bb[a].v--),0==Bb[a].v&&delete Bb[a])}}function Ib(a,b,c,d,e){var f=1,b=x(b);if(a[b]){a.u--;a=a[b];a.ta?a.ta++:a.ta=1;try{for(var g=a.length,k=0;k<g;k++){var m=a[k];m&&!m.Z&&(f&=Jb(m,e)!==p)}}finally{a.ta--,Hb(c,d,b,a)}}return Boolean(f)}function Jb(a,b){a.a&&P(a.key);return a.handleEvent(b)}
function Q(a,b){var c=b.type||b,d=Bb;if(!(c in d))return i;if(ea(b))b=new ob(b,a);else if(b instanceof ob)b.target=b.target||a;else{var e=b,b=new ob(c,a);Ja(b,e)}var e=1,f,d=d[c],c=i in d,g;if(c){f=[];for(g=a;g;g=g.Pa)f.push(g);g=d[i];g.u=g.v;for(var k=f.length-1;!b.O&&0<=k&&g.u;k--)b.b=f[k],e&=Ib(g,f[k],b.type,i,b)&&b.ya!=p}if(p in d)if(g=d[p],g.u=g.v,c)for(k=0;!b.O&&k<f.length&&g.u;k++)b.b=f[k],e&=Ib(g,f[k],b.type,p,b)&&b.ya!=p;else for(d=a;!b.O&&d&&g.u;d=d.Pa)b.b=d,e&=Ib(g,d,b.type,p,b)&&b.ya!=
p;return Boolean(e)}
function Eb(a,b){if(!Ab[a])return i;var c=Ab[a],d=c.type,e=Bb;if(!(d in e))return i;var e=e[d],f,g;if(!rb){var k;if(!(k=b))a:{k=["window","event"];for(var m=t;f=k.shift();)if(m[f]!=j)m=m[f];else{k=j;break a}k=m}f=k;k=i in e;m=p in e;if(k){if(0>f.keyCode||f.returnValue!=h)return i;a:{var s=p;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(n){s=i}if(s||f.returnValue==h)f.returnValue=i}}s=new ub;vb(s,f,this);f=i;try{if(k){for(var l=[],q=s.b;q;q=q.parentNode)l.push(q);g=e[i];g.u=g.v;for(var w=l.length-
1;!s.O&&0<=w&&g.u;w--)s.b=l[w],f&=Ib(g,l[w],d,i,s);if(m){g=e[p];g.u=g.v;for(w=0;!s.O&&w<l.length&&g.u;w++)s.b=l[w],f&=Ib(g,l[w],d,p,s)}}else f=Jb(c,s)}finally{l&&(l.length=0)}return f}d=new ub(b,this);return f=Jb(c,d)};function Kb(){M.call(this)}z(Kb,M);r=Kb.prototype;r.$a=i;r.Pa=j;r.addEventListener=function(a,b,c,d){N(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){Gb(this,a,b,c,d)};r.k=function(){Kb.h.k.call(this);var a,b=0,c=a==j;a=!!a;if(this==j)Ga(Cb,function(d){for(var e=d.length-1;0<=e;e--){var f=d[e];if(c||a==f.capture)P(f.key),b++}});else{var d=x(this);if(Cb[d])for(var d=Cb[d],e=d.length-1;0<=e;e--){var f=d[e];if(c||a==f.capture)P(f.key),b++}}this.Pa=j};function S(a){M.call(this);u(a)&&this.Xa(a)}z(S,Kb);var Lb={},Mb={},Nb={};function Ob(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function Pb(a){return a.ol_accessors_||(a.ol_accessors_={})}function T(a){return Lb[a]||(Lb[a]=a.toLowerCase()+"_changed")}function V(a,b){var c=Pb(a);if(b in c){var d=c[b],c=d.target,d=d.key,e=Mb[d]||(Mb[d]="get"+Ob(d));return c[e]?c[e]():V(c,d)}return a[b]}
S.prototype.set=function(a,b){var c=Pb(this);if(a in c){var d=c[a],c=d.target,d=d.key,e=Nb[d]||(Nb[d]="set"+Ob(d));if(c[e])c[e](b);else c.set(d,b)}else this[a]=b,c=T(a),Q(this,c)};S.prototype.Ab=function(a){Ga(a,function(a,c){var d=Nb[c]||(Nb[c]="set"+Ob(c));if(this[d])this[d](a);else this.set(c,a)},this)};S.prototype.Xa=S.prototype.Ab;function Qb(a,b,c,d,e){ob.call(this,a,e);this.a=b;this.index=c;this.c=d}z(Qb,ob);function Rb(a){S.call(this);this.a=a||[];Sb(this)}z(Rb,S);Rb.prototype.clear=function(){for(;this.length;){var a=V(this,"length")-1,b=this.a[a];B.splice.call(this.a,a,1);Sb(this);Q(this,new Qb("remove",b,h,h,this));Q(this,new Qb("remove_at",h,a,b,this))}};Rb.prototype.forEach=function(a,b){C(this.a,a,b)};
Rb.prototype.push=function(a){var b=this.a.length;Da(this.a,b,0,a);Sb(this);Q(this,new Qb("add",a,h,h,this));Q(this,new Qb("insert_at",a,b,h,this));return b};function Sb(a){a.set("length",a.a.length)};function Tb(a,b){var c=a%b;return 0>c*b?c+b:c};function Ub(a,b){this.x=u(a)?a:0;this.y=u(b)?b:0};function Vb(a,b){this.x=a;this.y=b}z(Vb,Ub);Vb.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};Vb.prototype.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};function W(a,b){Vb.call(this,a,b)}z(W,Vb);function Wb(a){return function(){return a}}var Xb=Wb(p),Yb=Wb(i),Zb=Wb(j);function $b(a,b,c){M.call(this);this.g=a;this.f=c;this.b=b||window;this.c=la(this.d,this)}z($b,M);$b.prototype.a=j;$b.prototype.e=p;function ac(a){if(a.a!=j){var b=bc(a),c=cc(a);b&&!c&&a.b.mozRequestAnimationFrame?P(a.a):b&&c?c.call(a.b,a.a):a.b.clearTimeout(a.a)}a.a=j}$b.prototype.d=function(){this.e&&this.a&&P(this.a);this.a=j;this.g.call(this.f,ta())};$b.prototype.k=function(){ac(this);$b.h.k.call(this)};
function bc(a){a=a.b;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||j}function cc(a){a=a.b;return a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||j};var dc,ec=!D||hb(9);!G&&!D||D&&hb(9)||G&&L("1.9.1");D&&L("9");function fc(a,b){var c;c=a.className;c=ea(c)&&c.match(/\S+/g)||[];for(var d=Ea(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Aa(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function gc(a,b){this.width=a;this.height=b}gc.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};gc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};gc.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function hc(a){return a?new ic(lc(a)):dc||(dc=new ic)}var mc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function nc(a){a=a.document.documentElement;return new gc(a.clientWidth,a.clientHeight)}
function oc(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!ec&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ua(g.name),'"');if(g.type){f.push(' type="',ua(g.type),'"');var k={};Ja(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=e.createElement(f);if(g)if(ea(g))f.className=g;else if("array"==ca(g))fc.apply(j,[f].concat(g));else{var m=f;Ga(g,function(a,b){"style"==b?m.style.cssText=a:"class"==b?m.className=a:"for"==b?m.htmlFor=a:b in mc?m.setAttribute(mc[b],a):0==b.lastIndexOf("aria-",
0)||0==b.lastIndexOf("data-",0)?m.setAttribute(b,a):m[b]=a})}if(2<d.length)for(var s=e,n=f,e=function(a){a&&n.appendChild(ea(a)?s.createTextNode(a):a)},g=2;g<d.length;g++){var l=d[g];if(da(l)&&!(ga(l)&&0<l.nodeType)){var k=C,q;a:{if((q=l)&&"number"==typeof q.length){if(ga(q)){q="function"==typeof q.item||"string"==typeof q.item;break a}if(fa(q)){q="function"==typeof q.item;break a}}q=p}if(q)if(q=l.length,0<q){for(var w=Array(q),y=0;y<q;y++)w[y]=l[y];l=w}else l=[];k(l,e)}else e(l)}return f}
function pc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function lc(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function ic(a){this.a=a||t.document||document}ic.prototype.createElement=function(a){return this.a.createElement(a)};ic.prototype.createTextNode=function(a){return this.a.createTextNode(a)};function qc(a){var b=a.a,a=!H?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Ub(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}
ic.prototype.appendChild=function(a,b){a.appendChild(b)};function rc(a){M.call(this);this.T=a||window;this.sa=N(this.T,"resize",this.Wb,p,this);this.R=nc(this.T||window);if(H&&Pa||Va&&this.T.self!=this.T.top)this.za=window.setInterval(la(this.Za,this),sc)}z(rc,Kb);var sc=500;r=rc.prototype;r.sa=j;r.T=j;r.R=j;r.za=j;r.k=function(){rc.h.k.call(this);this.sa&&(P(this.sa),this.sa=j);this.za&&(window.clearInterval(this.za),this.za=j);this.R=this.T=j};r.Wb=function(){this.Za()};
r.Za=function(){var a=nc(this.T||window);if(!(a==this.R||(!a||!this.R?0:a.width==this.R.width&&a.height==this.R.height)))this.R=a,Q(this,"resize")};function tc(a,b,c,d,e){if(!D&&(!H||!L("525")))return i;if(Oa&&e)return uc(a);if(e&&!d||!c&&(17==b||18==b)||D&&d&&b==a)return p;switch(a){case 13:return!(D&&hb(9));case 27:return!H}return uc(a)}function uc(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||H&&0==a)return i;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return i;default:return p}}
function vc(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function wc(a,b){M.call(this);a&&(this.ra&&xc(this),this.ca=a,this.qa=N(this.ca,"keypress",this,b),this.Ma=N(this.ca,"keydown",this.a,b,this),this.ra=N(this.ca,"keyup",this.b,b,this))}z(wc,Kb);r=wc.prototype;r.ca=j;r.qa=j;r.Ma=j;r.ra=j;r.H=-1;r.G=-1;r.Aa=p;
var yc={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},zc={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Ac=D||H&&L("525"),Bc=Oa&&G;
wc.prototype.a=function(a){if(H&&(17==this.H&&!a.la||18==this.H&&!a.C))this.G=this.H=-1;Ac&&!tc(a.V,this.H,a.M,a.la,a.C)?this.handleEvent(a):(this.G=G?vc(a.V):a.V,Bc&&(this.Aa=a.C))};wc.prototype.b=function(a){this.G=this.H=-1;this.Aa=a.C};
wc.prototype.handleEvent=function(a){var b=a.r,c,d,e=b.altKey;D&&"keypress"==a.type?(c=this.G,d=13!=c&&27!=c?b.keyCode:0):H&&"keypress"==a.type?(c=this.G,d=0<=b.charCode&&63232>b.charCode&&uc(c)?b.charCode:0):Va?(c=this.G,d=uc(c)?b.keyCode:0):(c=b.keyCode||this.G,d=b.charCode||0,Bc&&(e=this.Aa),Oa&&(63==d&&224==c)&&(c=191));var f=c,g=b.keyIdentifier;c?63232<=c&&c in yc?f=yc[c]:25==c&&a.M&&(f=9):g&&g in zc&&(f=zc[g]);a=f==this.H;this.H=f;b=new Cc(f,d,a,b);b.C=e;Q(this,b)};
function xc(a){a.qa&&(P(a.qa),P(a.Ma),P(a.ra),a.qa=j,a.Ma=j,a.ra=j);a.ca=j;a.H=-1;a.G=-1}wc.prototype.k=function(){wc.h.k.call(this);xc(this)};function Cc(a,b,c,d){d&&vb(this,d,h);this.type="key";this.V=a;this.Ea=b;this.a=c}z(Cc,ub);function Dc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};function Ec(a,b){var c=lc(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,j))?c[b]||c.getPropertyValue(b)||"":""}function Fc(a,b){return a.currentStyle?a.currentStyle[b]:j}function Gc(a,b){return Ec(a,b)||Fc(a,b)||a.style&&a.style[b]}function Hc(a,b){var c,d,e=G&&(Oa||Ya)&&L("1.9");b instanceof Ub?(c=b.x,d=b.y):(c=b,d=h);a.style.left=Ic(c,e);a.style.top=Ic(d,e)}
function Jc(a){var b=a.getBoundingClientRect();D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Kc(a){if(D&&!hb(8))return a.offsetParent;for(var b=lc(a),c=Gc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Gc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return j}
function Lc(a){var b=new Ub;if(1==a.nodeType){if(a.getBoundingClientRect){var c=Jc(a);b.x=c.left;b.y=c.top}else{c=qc(hc(a));var d,e=lc(a),f=Gc(a,"position"),g=G&&e.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==f&&(d=e.getBoxObjectFor(a))&&(0>d.screenX||0>d.screenY),k=new Ub(0,0),m;d=e?lc(e):document;if(m=D)if(m=!hb(9))hc(d),m=p;m=m?d.body:d.documentElement;if(a!=m)if(a.getBoundingClientRect)d=Jc(a),e=qc(hc(e)),k.x=d.left+e.x,k.y=d.top+e.y;else if(e.getBoxObjectFor&&!g)d=e.getBoxObjectFor(a),
e=e.getBoxObjectFor(m),k.x=d.screenX-e.screenX,k.y=d.screenY-e.screenY;else{g=a;do{k.x+=g.offsetLeft;k.y+=g.offsetTop;g!=a&&(k.x+=g.clientLeft||0,k.y+=g.clientTop||0);if(H&&"fixed"==Gc(g,"position")){k.x+=e.body.scrollLeft;k.y+=e.body.scrollTop;break}g=g.offsetParent}while(g&&g!=a);if(Va||H&&"absolute"==f)k.y-=e.body.offsetTop;for(g=a;(g=Kc(g))&&g!=e.body&&g!=m;)if(k.x-=g.scrollLeft,!Va||"TR"!=g.tagName)k.y-=g.scrollTop}b.x=k.x-c.x;b.y=k.y-c.y}if(G&&!L(12)){var s;D?s="-ms-transform":H?s="-webkit-transform":
Va?s="-o-transform":G&&(s="-moz-transform");var n;s&&(n=Gc(a,s));n||(n=Gc(a,"transform"));n?(a=n.match(Mc),a=!a?new Ub(0,0):new Ub(parseFloat(a[1]),parseFloat(a[2]))):a=new Ub(0,0);b=new Ub(b.x+a.x,b.y+a.y)}}else s=fa(a.Ib),n=a,a.targetTouches?n=a.targetTouches[0]:s&&a.r.targetTouches&&(n=a.r.targetTouches[0]),b.x=n.clientX,b.y=n.clientY;return b}function Ic(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Nc(a,b){a.style.display=b?"":"none"}
function Oc(a,b){hc(lc(a));if(D&&!L("8")){var c=a.style,d;if(D){d=Pc(a,Fc(a,"paddingLeft"));var e=Pc(a,Fc(a,"paddingRight")),f=Pc(a,Fc(a,"paddingTop")),g=Pc(a,Fc(a,"paddingBottom"));d=new Dc(f,e,g,d)}else d=Ec(a,"paddingLeft"),e=Ec(a,"paddingRight"),f=Ec(a,"paddingTop"),g=Ec(a,"paddingBottom"),d=new Dc(parseFloat(f),parseFloat(e),parseFloat(g),parseFloat(d));if(D)var e=Qc(a,"borderLeft"),f=Qc(a,"borderRight"),g=Qc(a,"borderTop"),k=Qc(a,"borderBottom"),e=new Dc(g,f,k,e);else e=Ec(a,"borderLeftWidth"),
f=Ec(a,"borderRightWidth"),g=Ec(a,"borderTopWidth"),k=Ec(a,"borderBottomWidth"),e=new Dc(parseFloat(g),parseFloat(f),parseFloat(k),parseFloat(e));c.pixelWidth=b.width-e.left-d.left-d.right-e.right;c.pixelHeight=b.height-e.top-d.top-d.bottom-e.bottom}else c=a.style,G?c.MozBoxSizing="border-box":H?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(b.width,0)+"px",c.height=Math.max(b.height,0)+"px"}
function Pc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var Rc={thin:2,medium:4,thick:6};function Qc(a,b){if("none"==Fc(a,b+"Style"))return 0;var c=Fc(a,b+"Width");return c in Rc?Rc[c]:Pc(a,c)}var Mc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Sc(a){M.call(this);this.a=a;a=ga(this.a)&&1==this.a.nodeType?this.a:this.a?this.a.body:j;this.e=!!a&&"rtl"==Gc(a,"direction");this.b=N(this.a,G?"DOMMouseScroll":"mousewheel",this)}z(Sc,Kb);
Sc.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.r;if("mousewheel"==a.type){c=1;if(D||H&&(Pa||L("532.0")))c=40;d=Tc(-a.wheelDelta,c);u(a.wheelDeltaX)?(b=Tc(-a.wheelDeltaX,c),c=Tc(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),u(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.c&&(b=Math.min(Math.max(b,-this.c),this.c));"number"==typeof this.d&&(c=Math.min(Math.max(c,-this.d),this.d));this.e&&(b=-b);b=new Uc(d,a,b,c);Q(this,b)};
function Tc(a,b){return H&&(Oa||Qa)&&0!=a%b?a:a/b}Sc.prototype.k=function(){Sc.h.k.call(this);P(this.b);delete this.b};function Uc(a,b,c,d){b&&vb(this,b,h);this.type="mousewheel";this.e=a;this.c=c;this.a=d}z(Uc,ub);var Vc=document&&"ontouchstart"in document.documentElement;function Wc(a,b,c,d){this.d=a;this.c=b;this.b=c;this.a=d};function Xc(a,b){var c=a.length;if(a[0]<=b)return 0;if(!(b<=a[c-1])){var d;for(d=1;d<c;++d){if(a[d]==b)return d;if(a[d]<b)return a[d-1]-b<b-a[d]?d-1:d}}return c-1};function Yc(a,b){if(u(a))return a+b};function Zc(a){this.xa=a;this.a=Yc};function $c(a,b){gc.call(this,a,b)}z($c,gc);function ad(a,b,c,d){this.b=a;this.a=b;this.c=c;this.d=d}ad.prototype.e=function(){return this.d-this.a};ad.prototype.f=function(){return this.c-this.b};ad.prototype.toString=function(){return"("+[this.b,this.a,this.c,this.d].join(", ")+")"};function bd(a,b,c,d){ad.call(this,a,b,c,d)}z(bd,ad);function cd(a){var b=arguments[0],b=new bd(b.x,b.y,b.x,b.y),c;for(c=1;c<arguments.length;++c){var d=arguments[c];b.b=Math.min(b.b,d.x);b.a=Math.min(b.a,d.y);b.c=Math.max(b.c,d.x);b.d=Math.max(b.d,d.y)}return b}bd.prototype.transform=function(a){var b=a(new W(this.b,this.a)),a=a(new W(this.c,this.d));return new bd(b.x,b.y,a.x,a.y)};function dd(a,b){ob.call(this,a);this.map=b;this.ma=p}z(dd,ob);dd.prototype.o=function(){dd.h.o.call(this);this.ma=i};function ed(a,b){Ub.call(this,a,b)}z(ed,Ub);function fd(a,b,c){dd.call(this,a,b);this.a=c;this.d=this.c=j}z(fd,dd);function gd(a){if(a.c===j){var b=a.map,c=hd(a);b.w()?(b=b.f,id(b),c=[c.x,c.y,0],jd(b.t,c,c),c=new W(c[0],c[1])):c=j;a.c=c}return a.c}function hd(a){if(a.d===j){var b,c=a.map.d;b=Lc(a.a);c=Lc(c);b=new Ub(b.x-c.x,b.y-c.y);a.d=new ed(b.x,b.y)}return a.d}function kd(a){this.a=a;this.d=j;this.c=p;this.f=0;this.e=this.b=j;a=this.a.d;Vc||N(a,["click","dblclick"],this.Ba,p,this);N(a,Vc?"touchstart":"mousedown",this.fb,p,this)}z(kd,Kb);
function ld(a){if(Vc){var b=a.r;b.touches&&b.touches.length&&(b=b.touches[0],a.clientX=b.clientX,a.clientY=b.clientY)}}r=kd.prototype;r.Ba=function(a){if(!this.c){var b;"dblclick"!==a.type&&(b=new fd(md,this.a,a),Q(this,b));this.f||(b=new fd(nd,this.a,a),Q(this,b))}};r.hb=function(a){if(this.d){if(!this.c){var b=(new Date).getTime();this.f=!this.f||250<b-this.f?b:0;Vc&&this.Ba(this.e)}this.e=j;C(this.b,P);this.d=this.b=j;this.c&&Q(this,new fd(od,this.a,a))}};
r.fb=function(a){this.d||(ld(a),this.e=a,this.d={clientX:a.clientX,clientY:a.clientY},this.c=p,this.b=[N(document,Vc?"touchmove":"mousemove",this.Hb,p,this),N(document,Vc?"touchend":"mouseup",this.hb,p,this)],"mousedown"===a.type&&a.o())};r.Hb=function(a){var b;this.c||(this.c=i,b=new fd(pd,this.a,this.e),Q(this,b));ld(a);this.d={clientX:a.clientX,clientY:a.clientY};a.o();b=new fd(qd,this.a,a);Q(this,b)};
r.k=function(){var a=this.a.d;Gb(a,Vc?"touchstart":"mousedown",this.fb,p,this);Gb(a,Vc?"touchend":"mouseup",this.hb,p,this);Gb(a,"click",this.Ba,p,this);this.b!==j&&(C(this.b,P),this.b=j);kd.h.k.call(this)};var md="click",nd="dblclick",pd="dragstart",qd="drag",od="dragend";function rd(a,b,c){this.a=a;this.b=b;this.c=c}function sd(a,b){rd.call(this,a,b.units,j);this.pb=b}z(sd,rd);var td={},ud={},vd={};function wd(a){C(a,function(a){ud[a.a]=a;xd(a,a,yd)});C(a,function(b){C(a,function(a){b!==a&&xd(b,a,yd)})})}function xd(a,b,c){a=a.a;b=b.a;a in vd||(vd[a]={});vd[a][b]=c}function zd(a){var b=ud[a];"Proj4js"in t&&!u(b)&&(b=Ad(a));u(b)||(b=j);return b}function Ad(a){var b=td[a];u(b)||(b=new Proj4js.Proj(a),b=new sd(a,b),td[a]=b);return b}
function Bd(a,b){var c=a.a,d=b.a,e;c in vd&&d in vd[c]&&(e=vd[c][d]);if("Proj4js"in t&&!u(e)){var f;f=(a instanceof sd?a:Ad(a.a)).pb;var g;g=(b instanceof sd?b:Ad(a.a)).pb;e=function(a){a=new Proj4js.Point(a.x,a.y);a=Proj4js.transform(f,g,a);return new W(a.x,a.y)};xd(a,b,e)}u(e)||(e=Cd);return e}function Cd(a){return a}function yd(a){return new W(a.x,a.y)}
var Dd=6378137*Math.PI,Ed=new bd(-Dd,-Dd,Dd,Dd),Fd=Ba(["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913"],function(a){return new rd(a,"m",Ed)}),Gd=new bd(-180,-90,180,90),Hd=Ba(["CRS:84","EPSG:4326","urn:ogc:def:crs:EPSG:6.6:4326"],function(a){return new rd(a,"degrees",Gd)});wd(Fd);wd(Hd);function Id(a){var b=6378137*Math.PI*a.x/180,a=6378137*Math.log(Math.tan(Math.PI*(a.y+90)/360));return new W(b,a)}
function Jd(a){return new W(180*a.x/(6378137*Math.PI),360*Math.atan(Math.exp(a.y/6378137))/Math.PI-90)}C(Hd,function(a){C(Fd,function(b){xd(a,b,Id);xd(b,a,Jd)})});function Kd(a,b,c,d){ad.call(this,a,b,c,d)}z(Kd,ad);function Ld(a,b,c){Vb.call(this,b,c);this.q=a}z(Ld,W);function Md(a){a=a.split("/");a=Ba(a,function(a){return parseInt(a,10)});return new Ld(a[0],a[1],a[2])}Ld.prototype.hash=function(){return(this.x<<this.q)+this.y};Ld.prototype.toString=function(){return[this.q,this.x,this.y].join("/")};function Nd(a,b,c,d){ad.call(this,a,b,c,d)}z(Nd,ad);function Od(a,b,c,d){var e,f;for(e=a.b;e<=a.c;++e)for(f=a.a;f<=a.d;++f)c.call(d,new Ld(b,e,f))}Nd.prototype.e=function(){return this.d-this.a+1};Nd.prototype.f=function(){return this.c-this.b+1};function Pd(a){this.a=a.Qa;this.f=this.a.length;this.g=u(a.B)?a.B:j;this.d=u(a.origin)?a.origin:j;this.e=j;u(a.lc)&&(this.e=a.lc);this.b=u(a.tb)?a.tb:new $c(256,256)}Pd.prototype.c=function(a,b,c){for(var d=Qd(this,a),a=a.q-1;0<=a&&!b.call(c,a,Rd(this,d,this.a[a]));)--a};function Sd(a,b){return a.d===j?a.e[b]:a.d}
function Td(a,b,c){var c=c/a.a[b.q],a=a.b,a=new $c(a.width/c,a.height/c),d,e,c=Math.round(b.x*a.width);d=Math.round((b.x+1)*a.width);e=Math.round(b.y*a.height);b=Math.round((b.y+1)*a.height);return new Kd(c,e,d,b)}function Rd(a,b,c){var d=Ud(a,new W(b.b,b.a),c),a=Ud(a,new W(b.c,b.d),c);return new Nd(d.x,d.y,a.x,a.y)}function Qd(a,b){var c=Sd(a,b.q),d=a.a[b.q],e=a.b,f=c.x+b.x*e.width*d,c=c.y+b.y*e.height*d;return new bd(f,c,f+e.width*d,c+e.height*d)}
function Ud(a,b,c){var d=Xc(a.a,c),e=c/a.a[d],f=Sd(a,d),b=new W(Math.floor((b.x-f.x)/c),Math.floor((b.y-f.y)/c)),f=a.b,f=new $c(f.width/e,f.height/e),d=new Ld(d,Math.floor(b.x/f.width),Math.floor(b.y/f.height)),a=Td(a,d,c);b.x<a.b?d.x-=1:b.x>=a.c&&(d.x+=1);b.y<a.a?d.y-=1:b.y>=a.d&&(d.y+=1);return d};function Vd(a){M.call(this);this.element=u(a.element)?a.element:j;this.f=a.target;this.a=j;u(a.map)&&this.D(a.map)}z(Vd,M);Vd.prototype.k=function(){pc(this.element);Vd.h.k.call(this)};Vd.prototype.D=function(a){this.a===j||pc(this.element);this.a=a;this.a!==j&&(u(this.f)?this.f:a.P).appendChild(this.element)};function Wd(){this.b='&copy; <a href="http://www.openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA</a>';this.c=this.a=j};function Xd(a){var b=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);if(b){var c=[],d=b[2].charCodeAt(0),e;for(e=b[1].charCodeAt(0);e<=d;++e)c.push(a.replace(b[0],String.fromCharCode(e)));return Yd(Ba(c,Xd))}return function(b){return b===j?h:a.replace("{z}",b.q).replace("{x}",b.x).replace("{y}",b.y)}}function Yd(a){return function(b){if(b!==j){var c=Tb(b.hash(),a.length);return a[c](b)}}}function Zd(){}function $d(a,b){return function(c){return c===j?h:b(a(c))}};function ae(a){M.call(this);this.e=u(a.A)?a.A:j;this.d=u(a.B)?a.B:a.A.c;this.a=u(a.U)?a.U:j}z(ae,Kb);ae.prototype.ha=Yb;function X(a){S.call(this);this.a=a.source;this.g(u(a.Db)?a.Db:0);this.i(u(a.Eb)?a.Eb:1);this.l(u(a.Zb)?a.Zb:0);this.j(u(a.opacity)?a.opacity:1);this.m(u(a.pc)?a.pc:1);this.p(u(a.visible)?a.visible:i);this.a.ha()||Fb(this.a,"load",this.t,p,this)}z(X,S);X.prototype.c=function(){return V(this,"brightness")};X.prototype.getBrightness=X.prototype.c;X.prototype.d=function(){return V(this,"contrast")};X.prototype.getContrast=X.prototype.d;X.prototype.e=function(){return V(this,"hue")};
X.prototype.getHue=X.prototype.e;X.prototype.b=function(){return V(this,"opacity")};X.prototype.getOpacity=X.prototype.b;X.prototype.f=function(){return V(this,"saturation")};X.prototype.getSaturation=X.prototype.f;X.prototype.F=function(){return V(this,"visible")};X.prototype.getVisible=X.prototype.F;X.prototype.t=function(){Q(this,"load")};X.prototype.ha=function(){return this.a.ha()};X.prototype.g=function(a){a=Math.min(Math.max(a,-1),1);a!=this.c()&&this.set("brightness",a)};
X.prototype.setBrightness=X.prototype.g;X.prototype.i=function(a){a=Math.max(0,a);a!=this.d()&&this.set("contrast",a)};X.prototype.setContrast=X.prototype.i;X.prototype.l=function(a){a!=this.e()&&this.set("hue",a)};X.prototype.setHue=X.prototype.l;X.prototype.j=function(a){a=Math.min(Math.max(a,0),1);a!=this.b()&&this.set("opacity",a)};X.prototype.setOpacity=X.prototype.j;X.prototype.m=function(a){a=Math.max(0,a);a!=this.f()&&this.set("saturation",a)};X.prototype.setSaturation=X.prototype.m;
X.prototype.p=function(a){a=!!a;a!=this.F()&&this.set("visible",a)};X.prototype.setVisible=X.prototype.p;function be(a){this.g=document.createElement("UL");var b=oc("DIV",{"class":"ol-attribution"},this.g);this.c=j;this.e={};this.K={};this.b={};this.d=j;Vd.call(this,{element:b,map:a.map,target:a.target})}z(be,Vd);r=be.prototype;r.ob=function(a){var b=x(a);this.e[b]=N(a,T("visible"),this.Tb,p,this);a.a.ha()?ce(this,a):Fb(a,"load",this.gc,p,this)};
function ce(a,b){var c=b.a.a;if(c!==j){var d=a.a,e=d.w(),f=de(d),g=d.l(),k=d.a(),m=b.F(),s;s=e&&m?ee(a,b,f,k,g):j;C(c,function(a){var b=x(a),c=document.createElement("LI");c.innerHTML=a.b;(!d.w||!m||s===j||!s[b])&&"none"!=c.style.display&&Nc(c,p);this.g.appendChild(c);this.K[b]=c},a)}}
function ee(a,b,c,d,e){var f=b.a,b=f.a;if(b===j)return j;var g;f instanceof fe&&(g=Xc(f.S.a,d));var k={};C(b,function(a){var b=x(a),n=i;if(b in this.b)a=this.b[b];else{var l=a.c,a=a.a;if(a!==j&&!(l===e||(l.b!=e.b?0:Bd(l,e)===yd))){var q=Bd(l,e);q!==yd&&(a=Ba(a,function(a){return a.transform(q)}))}this.b[b]=a}a===j||(n=f instanceof fe?Ca(a,function(a){return a.b(c,g)}):Ca(a,function(a){return a.a(c,d)}));k[b]=n},a);return k}r.gc=function(a){ce(this,a.target)};
r.Tb=function(a){var b=this.a,c=b.w(),d=de(b),e=b.l(),b=b.a();ge(this,a.target,c,d,b,e)};r.hc=function(a){this.ob(a.a)};r.ic=function(a){var a=a.a,b=x(a);P(this.e[b]);delete this.e[b];C(a.a.a,function(a){a=x(a);delete this.b[a];pc(this.K[a]);delete this.K[a]},this)};r.Ka=function(){var a=this.a,b=a.w(),c=de(a),d=a.l(),e=a.a();V(a,he).forEach(function(a){ge(this,a,b,c,e,d)},this)};
r.gb=function(){this.c!==j&&(C(this.c,P),this.c=j);Ga(this.K,function(a){pc(a)},this);this.K={};this.b={};var a=V(this.a,he);a!=j&&(a.forEach(this.ob,this),this.c=[N(a,"add",this.hc,p,this),N(a,"remove",this.ic,p,this)])};r.D=function(a){this.d===j||C(this.d,P);this.d=j;be.h.D.call(this,a);a!==j&&(this.d=[N(a,T(ie),this.Ka,p,this),N(a,T(he),this.gb,p,this),N(a,T(je),this.Ka,p,this),N(a,T(ke),this.Ka,p,this)],this.gb())};
function ge(a,b,c,d,e,f){c&&b.F()?(b=ee(a,b,d,e,f),Ga(b,function(a,b){var c=this.K[b];"none"!=c.style.display!=a&&Nc(c,a)},a)):(b=b.a.a,b===j||C(b,function(a){a=x(a);Nc(this.K[a],p)},a))};function le(a){var b=Vc?"touchend":"click",c=oc("A",{href:"#zoomIn","class":"ol-zoom-in"},"+");N(c,b,this.c,p,this);var d=oc("A",{href:"#zoomOut","class":"ol-zoom-out"},"\u2212");N(d,b,this.d,p,this);b=oc("DIV","ol-zoom ol-unselectable",c,d);Vd.call(this,{element:b,map:a.map,target:a.target});this.b=u(a.ab)?a.ab:1}z(le,Vd);le.prototype.c=function(a){a.o();this.a.zoom(this.b)};le.prototype.d=function(a){a.o();this.a.zoom(-this.b)};function me(){};function ne(a){this.a=a}z(ne,me);ne.prototype.b=function(a){var b=a.a;if(a.type==nd&&(Vc||xb(a.a))){var c=a.map,d=gd(a);c.zoom(a.a.M?-this.a:this.a,d);a.o();b.o()}};function oe(a){return a.C&&!a.va&&!a.M}function pe(a){return!a.C&&!a.va&&!a.M}function qe(a){return!a.C&&!a.va&&a.M};function re(){this.f=p;this.t=this.p=this.j=this.l=0;this.ja=this.i=j}z(re,me);re.prototype.g=v;re.prototype.N=v;re.prototype.d=Xb;re.prototype.b=function(a){var b=a.map;if(b.w()){var c=a.a;this.f?a.type==qd?(this.c=c.clientX-this.l,this.a=c.clientY-this.j,this.g(a)):a.type==od&&(this.c=c.clientX-this.l,this.a=c.clientY-this.j,this.N(a),this.f=p):a.type==pd&&(this.l=c.clientX,this.j=c.clientY,this.a=this.c=0,this.i=b.b(),this.ja=gd(a),this.d(a)&&(this.f=i,a.o()))}};function se(a){re.call(this);this.e=a}z(se,re);se.prototype.g=function(a){var a=a.map,b=a.a(),c=a.e(),b=new W(-b*this.c,b*this.a);a.f.X()&&u(c)&&b.rotate(c);c=new W(this.i.x+b.x,this.i.y+b.y);te(a);a.j(c)};se.prototype.d=function(a){return this.e(a.a)?(te(a.map),i):p};function ue(a){re.call(this);this.m=a;this.e=0}z(ue,re);ue.prototype.g=function(a){var b=a.map,c=b.c(),a=hd(a),c=Math.atan2(c.height/2-a.y,a.x-c.width/2);te(b);b.rotate(this.e,-c)};ue.prototype.d=function(a){var b=a.a,c=a.map;return xb(b)&&this.m(b)&&c.f.X()?(te(c),b=c.c(),a=hd(a),a=Math.atan2(b.height/2-a.y,a.x-b.width/2),this.e=(c.e()||0)+a,i):p};function ve(a){var b=oc("DIV","ol-dragbox");this.b=j;this.d=a.ja;this.c=j;Vd.call(this,{element:b,map:a.map})}z(ve,Vd);ve.prototype.D=function(a){this.c!==j&&(P(this.c),this.c=j);a!==j&&(this.b=we(a,this.d),Hc(this.element,this.b),Oc(this.element,new $c(0,0)),this.c=N(a,qd,this.e,p,this));ve.h.D.call(this,a)};ve.prototype.e=function(a){var b=this.a,a=gd(a),b=we(b,a);Hc(this.element,new ed(Math.min(b.x,this.b.x),Math.min(b.y,this.b.y)));Oc(this.element,new $c(Math.abs(b.x-this.b.x),Math.abs(b.y-this.b.y)))};function xe(a){re.call(this);this.m=a;this.e=j}z(xe,re);xe.prototype.N=function(a){this.e.D(j);this.e=j;if(64<=this.c*this.c+this.a*this.a){var b=a.map,c=cd(this.ja,gd(a));ye(b,function(){this.j(new W((c.b+c.c)/2,(c.a+c.d)/2));var a;a=this.c();a=u(a)?Math.max((c.c-c.b)/a.width,(c.d-c.a)/a.height):h;a=this.t.xa(a,0);this.p(a);this.f.X()&&this.Y(0)},b)}};xe.prototype.d=function(a){var b=a.a;return xb(b)&&this.m(b)?(this.e=new ve({map:a.map,ja:this.ja}),i):p};function ze(a){this.a=a}z(ze,me);ze.prototype.b=function(a){if("key"==a.type){var b=a.a,c=b.V;if(40==c||37==c||39==c||38==c){var d=a.map,e=d.a()*this.a,c=40==c?new W(0,-e):37==c?new W(-e,0):39==c?new W(e,0):new W(0,e),e=d.b();d.j(new W(e.x+c.x,e.y+c.y));b.o();a.o()}}};function Ae(){}z(Ae,me);Ae.prototype.b=function(a){if("key"==a.type){var b=a.a,c=b.Ea;if(43==c||45==c)a.map.zoom(43==c?4:-4),b.o(),a.o()}};function Be(a){this.a=a}z(Be,me);Be.prototype.b=function(a){if("mousewheel"==a.type){var b=a.map,c=a.a,d=gd(a),e=0>c.a?this.a:-this.a;te(b);b.zoom(e,d);a.o();c.o()}};function Ce(a,b){S.call(this);this.f=a;this.a=b;N(this.a,T("brightness"),this.Ga,p,this);N(this.a,T("contrast"),this.Ha,p,this);N(this.a,T("hue"),this.Ia,p,this);N(this.a,"load",this.Na,p,this);N(this.a,T("opacity"),this.na,p,this);N(this.a,T("saturation"),this.Ja,p,this);N(this.a,T("visible"),this.oa,p,this)}z(Ce,S);r=Ce.prototype;r.s=function(){return this.a};r.L=function(){return this.f};r.Ga=v;r.Ha=v;r.Ia=v;r.Na=v;r.na=v;r.Ja=v;r.oa=v;function De(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}De.prototype.a=4;De.prototype.set=function(a,b){for(var b=b||0,c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};De.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(De.BYTES_PER_ELEMENT=4,De.prototype.BYTES_PER_ELEMENT=De.prototype.a,De.prototype.set=De.prototype.set,De.prototype.toString=De.prototype.toString,aa("Float32Array",De));function Ee(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Ee.prototype.a=8;Ee.prototype.set=function(a,b){for(var b=b||0,c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Ee.prototype.toString=Array.prototype.join;"undefined"==typeof Float64Array&&(Ee.BYTES_PER_ELEMENT=8,Ee.prototype.BYTES_PER_ELEMENT=Ee.prototype.a,Ee.prototype.set=Ee.prototype.set,Ee.prototype.toString=Ee.prototype.toString,aa("Float64Array",Ee));function Fe(){var a=Array(16);Ge(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a}function Ge(a,b,c,d,e,f,g,k,m,s,n,l,q,w,y,I,J){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=k;a[7]=m;a[8]=s;a[9]=n;a[10]=l;a[11]=q;a[12]=w;a[13]=y;a[14]=I;a[15]=J}function He(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1}
function Ie(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],m=a[5],s=a[6],n=a[7],l=a[8],q=a[9],w=a[10],y=a[11],I=a[12],J=a[13],E=a[14],a=a[15],A=b[0],O=b[1],R=b[2],K=b[3],Z=b[4],U=b[5],na=b[6],oa=b[7],pa=b[8],qa=b[9],ra=b[10],sa=b[11],F=b[12],jc=b[13],kc=b[14],b=b[15];c[0]=d*A+k*O+l*R+I*K;c[1]=e*A+m*O+q*R+J*K;c[2]=f*A+s*O+w*R+E*K;c[3]=g*A+n*O+y*R+a*K;c[4]=d*Z+k*U+l*na+I*oa;c[5]=e*Z+m*U+q*na+J*oa;c[6]=f*Z+s*U+w*na+E*oa;c[7]=g*Z+n*U+y*na+a*oa;c[8]=d*pa+k*qa+l*ra+I*sa;c[9]=e*pa+m*qa+q*ra+J*sa;c[10]=f*
pa+s*qa+w*ra+E*sa;c[11]=g*pa+n*qa+y*ra+a*sa;c[12]=d*F+k*jc+l*kc+I*b;c[13]=e*F+m*jc+q*kc+J*b;c[14]=f*F+s*jc+w*kc+E*b;c[15]=g*F+n*jc+y*kc+a*b}function jd(a,b,c){var d=b[0],e=b[1],b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function Je(a,b,c){var d=a[1]*b+a[5]*c+0*a[9]+a[13],e=a[2]*b+a[6]*c+0*a[10]+a[14],f=a[3]*b+a[7]*c+0*a[11]+a[15];a[12]=a[0]*b+a[4]*c+0*a[8]+a[12];a[13]=d;a[14]=e;a[15]=f}
function Ke(a,b,c){Ge(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,1*a[8],1*a[9],1*a[10],1*a[11],a[12],a[13],a[14],a[15])}function Le(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],m=a[6],s=a[7],n=Math.cos(b),l=Math.sin(b);a[0]=c*n+g*l;a[1]=d*n+k*l;a[2]=e*n+m*l;a[3]=f*n+s*l;a[4]=c*-l+g*n;a[5]=d*-l+k*n;a[6]=e*-l+m*n;a[7]=f*-l+s*n}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function Me(a,b){M.call(this);this.Y=a;this.map=b;this.z={};this.e=j;this.c=Fe();this.t=Fe();this.d=i;this.I=[N(b,T(Ne),this.bb,p,this),N(b,T(ie),this.da,p,this),N(b,T(he),this.Ub,p,this),N(b,T(je),this.ea,p,this),N(b,T(Oe),this.fa,p,this),N(b,T(ke),this.ga,p,this)]}z(Me,M);r=Me.prototype;r.ua=function(a){var b=this.Ca(a);this.Ra(a,b)};r.X=Xb;r.Ca=Zb;r.k=function(){Ga(this.z,function(a){nb(a)});C(this.I,P);this.e===j||C(this.e,P);Me.h.k.call(this)};
function Pe(a,b,c){var d=V(a.map,he);u(d)&&d.forEach(function(a,d){if(a.ha()&&a.F()){var g=x(a);b.call(c,a,this.z[g],d)}},a)}r.bb=v;r.da=function(){this.d=i};r.jc=function(a){this.ua(a.a)};r.Ub=function(){var a=this.z,b=[],c=0,d;for(d in a)b[c++]=a[d];C(b,function(a){this.wa(a)},this);this.z={};this.e!==j&&(C(this.e,P),this.e=j);a=V(this.map,he);a!=j&&(a.forEach(this.ua,this),this.e=[N(a,"add",this.jc,p,this),N(a,"remove",this.kc,p,this)])};r.kc=function(a){this.Oa(a.a)};r.ea=function(){this.d=i};
r.fa=function(){this.d=i};r.ga=function(){this.d=i};r.Oa=function(a){nb(this.wa(a))};r.wa=function(a){a=x(a);if(a in this.z){var b=this.z[a];delete this.z[a];return b}return j};r.Q=Xb;r.Ra=function(a,b){var c=x(a);this.z[c]=b};
function id(a){if(a.d){var b=a.map,c=b.b(),d=b.a(),e=b.e(),b=b.c();He(a.c);Je(a.c,b.width/2,b.height/2);Ke(a.c,1/d,-1/d);a.X()&&u(e)&&Le(a.c,-e);Je(a.c,-c.x,-c.y);var f=a.c,c=a.t,d=f[0],e=f[1],b=f[2],g=f[3],k=f[4],m=f[5],s=f[6],n=f[7],l=f[8],q=f[9],w=f[10],y=f[11],I=f[12],J=f[13],E=f[14],f=f[15],A=d*m-e*k,O=d*s-b*k,R=d*n-g*k,K=e*s-b*m,Z=e*n-g*m,U=b*n-g*s,na=l*J-q*I,oa=l*E-w*I,pa=l*f-y*I,qa=q*E-w*J,ra=q*f-y*J,sa=w*f-y*E,F=A*sa-O*ra+R*qa+K*pa-Z*oa+U*na;0!=F&&(F=1/F,c[0]=(m*sa-s*ra+n*qa)*F,c[1]=(-e*
sa+b*ra-g*qa)*F,c[2]=(J*U-E*Z+f*K)*F,c[3]=(-q*U+w*Z-y*K)*F,c[4]=(-k*sa+s*pa-n*oa)*F,c[5]=(d*sa-b*pa+g*oa)*F,c[6]=(-I*U+E*R-f*O)*F,c[7]=(l*U-w*R+y*O)*F,c[8]=(k*ra-m*pa+n*na)*F,c[9]=(-d*ra+e*pa-g*na)*F,c[10]=(I*Z-J*R+f*A)*F,c[11]=(-l*Z+q*R-y*A)*F,c[12]=(-k*qa+m*oa-s*na)*F,c[13]=(d*qa-e*oa+b*na)*F,c[14]=(-I*K+J*O-E*A)*F,c[15]=(l*K-q*O+w*A)*F);a.d=p}};function Qe(a,b,c){M.call(this);this.Sa=a;this.g=b;this.a=0;this.b=new Image;c!==j&&(this.b.crossOrigin=c);this.d={};this.c=j}z(Qe,Kb);function Re(a,b){if(u(b)){var c,d=x(b);if(d in a.d)return a.d[d];a:{for(c in a.d){c=p;break a}c=i}c=c?a.b:a.b.cloneNode(p);return a.d[d]=c}return a.b}Qe.prototype.e=function(){this.a=3;C(this.c,P);this.c=j};Qe.prototype.f=function(){this.a=2;C(this.c,P);this.c=j;Q(this,"change")};
function Se(a){0==a.a&&(a.a=1,a.c=[Fb(a.b,"error",a.e,p,a),Fb(a.b,"load",a.f,p,a)],a.b.src=a.g)};function fe(a){ae.call(this,{U:a.U,B:a.B,A:a.A});this.S=u(a.S)?a.S:j;this.$=u(a.$)?a.$:Zd;this.c=u(a.crossOrigin)?a.crossOrigin:"anonymous";this.b={}}z(fe,ae);function Te(a,b){var c=b.toString();if(c in a.b)return a.b[c];var d=a.$(b),d=u(d)?new Qe(b,d,a.c):j;return a.b[c]=d};function Ue(a){X.call(this,a)}z(Ue,X);function Ve(a,b,c){Ce.call(this,a,b);this.target=c;this.origin=j;this.na();this.oa()}z(Ve,Ce);Ve.prototype.L=function(){return Ve.h.L.call(this)};Ve.prototype.Na=function(){Y(this.f.map)};Ve.prototype.na=function(){var a=this.s().b(),b=this.target.style;"opacity"in b?b.opacity=a:"MozOpacity"in b?b.MozOpacity=a:"filter"in b&&(b.filter=""===a?"":"alpha(opacity="+100*a+")")};Ve.prototype.oa=function(){Nc(this.target,this.s().F())};function We(a,b,c){Ve.call(this,a,b,c);this.b={};this.c=h}z(We,Ve);We.prototype.s=function(){return We.h.s.call(this)};
We.prototype.Q=function(){var a=this.f.map;if(a.w()){var b=Xe(a),a=a.a(),c=a!==this.c,d=this.s().a,e=d.S,f=Xc(e.a,a),g={};g[f]={};var k=i;Od(Rd(e,b,a),f,function(a){var b=Te(d,a);if(b!==j){var c=b.Sa.toString(),l=b.a;if(0==l)Se(b);else if(2==l){g[f][c]=b;return}k=p;e.c(a,function(a,b){var c=i;Od(b,a,function(b){var e=b.toString();if(!g[a]||!g[a][e])b=Te(d,b),b!==j&&2==b.a?(a in g||(g[a]={}),g[a][e]=b):c=p});return c})}},this);var m=Ba(Ha(g),Number);B.sort.call(m,Fa);for(var b=document.createDocumentFragment(),
s=document.createDocumentFragment(),n=p,l=p,q=0,w=m.length;q<w;++q){var y=m[q],I=g[y],J;J=a;var E=Sd(this.s().a.S,y);J=new W(Math.round((this.origin.x-E.x)/J),Math.round((E.y-this.origin.y)/J));for(var A in I){var E=I[A],O=Td(e,E.Sa,a),R=Re(E,this),K=R.style,Z=!(A in this.b);if(Z||c)K.left=O.b-J.x+"px",K.top=-O.d-J.y+"px",K.width=O.f()+"px",K.height=O.e()+"px";Z&&(this.b[A]=E,K.position="absolute",y===f?(b.appendChild(R),n=i):(s.appendChild(R),l=i))}}l&&((A=this.target.firstChild)?A.parentNode&&A.parentNode.insertBefore(s,
A):this.target.appendChild(s));n&&this.target.appendChild(b);this.c=a;for(var U in this.b)a=Md(U),a=g[a.q],a&&U in a||(a=this.b[U],delete this.b[U],pc(Re(a,this)));return!k}};function Ye(a,b){Me.call(this,a,b);this.a=document.createElement("DIV");this.a.className="ol-layers-pane ol-unselectable";var c=this.a.style;c.position="absolute";c.width="100%";c.height="100%";a.insertBefore(this.a,a.childNodes[0]||j);this.p={};this.f=j;this.j=h;this.g=j;this.m=h;this.i=j}z(Ye,Me);
function Ze(a,b,c,d){b="translate("+Math.round(b)+"px, "+Math.round(c)+"px) rotate("+d.toFixed(6)+"rad) scale3d(1, 1, 1)";a=a.a.style;a.WebkitTransform=b;a.MozTransform=b;a.a=b;a.msTransform=b;a.transform=b}r=Ye.prototype;r.X=Yb;r.Ca=function(a){if(a instanceof Ue){var b=document.createElement("DIV");b.className="ol-layer";b.style.position="absolute";this.a.appendChild(b);a=new We(this,a,b);this.p[x(a)]=b;return a}return j};r.da=function(){Ye.h.da.call(this);Y(this.map)};
r.ea=function(){Ye.h.ea.call(this);Y(this.map)};r.fa=function(){Ye.h.fa.call(this);Y(this.map)};r.ga=function(){Ye.h.ga.call(this);Y(this.map)};
r.Q=function(a){var b=this.map;if(b.w()){var c=b.b(),d=b.c(),e=b.a(),f=b.e();if(this.f===j)$e(this);else if(e!==this.j||!(d.width==this.g.width&&d.height==this.g.height))$e(this);else if(!(c==this.f||this.f&&c.x==this.f.x&&c.y==this.f.y)||f!==this.m){var g=this.map,k=g.a(),m=g.b(),s=g.c(),n=this.i,l=(m.x-n.x)/k,k=(n.y-m.y)/k;af(this,l,k);Ze(this,-(l-s.width/2),-(k-s.height/2),g.e())}this.f=c;this.j=e;this.m=f;this.g=d;var q=p;Pe(this,function(b,c){c.Q(a)&&(q=i)});q&&te(b)}};
function $e(a){var b=a.map,c=b.c(),d=c.width/2,c=c.height/2,e=b.b(),f=b.a(),g=new W(e.x-f*d,e.y+f*c);a.i=g;af(a,d,c);Ze(a,0,0,b.e());Ga(a.z,function(a){a.origin=g})}function af(a,b,c){b=Math.round(b)+"px "+Math.round(c)+"px";a=a.a.style;a.WebkitTransformOrigin=b;a.MozTransformOrigin=b;a.b=b;a.c=b;a.d=b};var bf=["webgl","webgl-experimental","webkit-3d","moz-webgl"];function cf(a,b){var c,d,e=bf.length;for(d=0;d<e;++d)try{if(c=a.getContext(bf[d],b),c!==j)return c}catch(f){}return j};function df(){if(!("WebGLRenderingContext"in t))return p;try{var a=document.createElement("CANVAS");return cf(a)!==j}catch(b){return p}};function ef(a){this.a=a}function ff(a){this.a=a}z(ff,ef);ff.prototype.b=function(){return 35632};function gf(a){this.a=a}z(gf,ef);gf.prototype.b=function(){return 35633};function hf(a,b){Ce.call(this,a,b);this.m=new Float32Array(16);this.t=new Float32Array(16);this.I=new Float32Array(16);this.J=new Float32Array(16);this.p=new Float32Array(16);this.c=i;this.Ga();this.Ha();this.Ia();this.Ja()}z(hf,Ce);function jf(a){Q(a,"change")}function kf(a){if(a.c){var b=a.p;He(b);Ie(b,a.t,b);Ie(b,a.m,b);Ie(b,a.J,b);Ie(b,a.I,b);a.c=p}return a.p}r=hf.prototype;r.L=function(){return hf.h.L.call(this)};
r.Ga=function(){var a=this.s().c(),b=this.m;He(b);b[12]=a;b[13]=a;b[14]=a;b[15]=1;this.c=i;jf(this)};r.Ha=function(){var a=this.s().d(),b=this.t;He(b);b[0]=a;b[5]=a;b[10]=a;b[15]=1;a=-0.5*a+0.5;b[12]=a;b[13]=a;b[14]=a;b[15]=1;this.c=i;jf(this)};
r.Ia=function(){var a=this.s().e(),b=Math.cos(a),a=Math.sin(a);Ge(this.I,0.213+0.787*b-0.213*a,0.213-0.213*b+0.143*a,0.213-0.213*b-0.787*a,0,0.715-0.715*b-0.715*a,0.715+0.285*b+0.14*a,0.715-0.715*b+0.715*a,0,0.072-0.072*b+0.928*a,0.072-0.072*b-0.283*a,0.072+0.928*b+0.072*a,0,0,0,0,1);this.c=i;jf(this)};r.Na=function(){jf(this)};r.na=function(){jf(this)};
r.Ja=function(){var a=this.s().f();Ge(this.J,0.213+0.787*a,0.213-0.213*a,0.213-0.213*a,0,0.715-0.715*a,0.715+0.285*a,0.715-0.715*a,0,0.072-0.072*a,0.072-0.072*a,0.072+0.928*a,0,0,0,0,1);this.c=i;jf(this)};r.oa=function(){jf(this)};r.pa=v;function lf(){this.a="precision mediump float;\n\nuniform sampler2D uTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n gl_FragColor = texture2D(uTexture, vTexCoord);\n}"}z(lf,ff);ba(lf);function mf(){this.a="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nuniform vec4 uTileOffset;\n\nvoid main(void) {\n  gl_Position.xy = aPosition * uTileOffset.xy + uTileOffset.zw;\n  gl_Position.z = 0.;\n  gl_Position.w = 1.;\n  vTexCoord = aTexCoord;\n}"}z(mf,gf);ba(mf);
function nf(a,b){hf.call(this,a,b);this.P=lf.ka();this.Y=mf.ka();this.e=this.i=this.g=this.n=j;this.l=h;this.d=Fe();this.j=this.b=j}z(nf,hf);nf.prototype.k=function(){var a=this.L().b;a.isContextLost()||(a.deleteBuffer(this.g),a.deleteFramebuffer(this.e),a.deleteTexture(this.i));nf.h.k.call(this)};nf.prototype.s=function(){return nf.h.s.call(this)};nf.prototype.pa=function(){this.e=this.i=this.g=this.n=j;this.l=h};
nf.prototype.Q=function(){var a=p,b=this.L(),c=this.f.map,d=b.b,e=c.b(),f=de(c),g=c.a(),k=Xe(c),m=c.e(),s=this.s().a,n=s.S,l=Xc(n.a,g),q=n.a[l],k=Rd(n,k,q),w;if(this.b!==j&&this.b.b==k.b&&k.c==this.b.c&&this.b.a==k.a&&k.a==this.b.a)w=this.j;else{var g=new $c(k.f(),k.e()),y=n.b,g=Math.max(g.width*y.width,g.height*y.height),g=Math.pow(2,Math.ceil(Math.log(g)/Math.log(2))),I=new $c(q*g,q*g),J=Sd(n,l),E=J.x+k.b*y.width*q,q=J.y+k.a*y.height*q;w=new bd(E,q,E+I.width,q+I.height);q=this.L().b;!u(this.l)||
this.l!=g?(Fb(this.f.map,of,ma(function(a,b,c){a.isContextLost()||(a.deleteFramebuffer(b),a.deleteTexture(c))},q,this.e,this.i)),y=q.createTexture(),q.bindTexture(3553,y),q.texImage2D(3553,0,6408,g,g,0,6408,5121,j),q.texParameteri(3553,10240,9729),q.texParameteri(3553,10241,9729),E=q.createFramebuffer(),q.bindFramebuffer(36160,E),q.framebufferTexture2D(36160,36064,3553,y,0),this.i=y,this.e=E,this.l=g):q.bindFramebuffer(36160,this.e);d.viewport(0,0,g,g);d.clearColor(0,0,0,0);d.clear(16384);d.disable(3042);
g=pf(b,this.P,this.Y);d.useProgram(g);this.n===j&&(this.n={aa:d.getAttribLocation(g,"aPosition"),ba:d.getAttribLocation(g,"aTexCoord"),vc:d.getUniformLocation(g,"uTileOffset"),Ta:d.getUniformLocation(g,"uTexture")});this.g===j?(g=d.createBuffer(),d.bindBuffer(34962,g),d.bufferData(34962,new Float32Array([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),35044),this.g=g):d.bindBuffer(34962,this.g);d.enableVertexAttribArray(this.n.aa);d.vertexAttribPointer(this.n.aa,2,5126,p,16,0);d.enableVertexAttribArray(this.n.ba);
d.vertexAttribPointer(this.n.ba,2,5126,p,16,8);d.uniform1i(this.n.Ta,0);var A={},O=[],R=i;A[l]={};Od(k,l,function(a){var c=Te(s,a);if(c!==j){var d=c.a;if(0==d)Se(c);else if(2==d){d=Re(c);if(d.src in b.l){A[l][a.toString()]=c;return}O.push(d)}else if(3==d)return;R=p;n.c(a,function(a,b){var c=i;Od(b,a,function(b){var d=b.toString();if(!A[a]||!A[a][d])b=Te(s,b),b!==j&&2==b.a?(A[a]||(A[a]={}),A[a][d]=b):c=p});return c})}},this);g=Ba(Ha(A),Number);B.sort.call(g,Fa);var K=new Float32Array(4);C(g,function(a){Ga(A[a],
function(a){var c=Qd(n,a.Sa),e=2*c.e()/I.height,f=2*(c.b-w.b)/I.width-1,g=2*(c.a-w.a)/I.height-1;K[0]=2*c.f()/I.width;K[1]=e;K[2]=f;K[3]=g;d.uniform4fv(this.n.vc,K);qf(b,Re(a));d.drawArrays(5,0,4)},this)},this);0==O.length||Fb(c,of,ma(function(a,b){C(b,function(b){qf(a,b)})},b,O));R?(this.b=k,this.j=w):(this.j=this.b=j,a=i)}He(this.d);Je(this.d,(e.x-w.b)/(w.c-w.b),(e.y-w.a)/(w.d-w.a));u(m)&&Le(this.d,m);Ke(this.d,(f.c-f.b)/(w.c-w.b),(f.d-f.a)/(w.d-w.a));Je(this.d,-0.5,-0.5);return a};function rf(){this.a="precision mediump float;\n\nuniform mat4 uColorMatrix;\nuniform float uOpacity;\nuniform mat4 uMatrix;\nuniform sampler2D uTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n\n  vec4 texCoord = uMatrix * vec4(vTexCoord, 0., 1.);\n  vec4 texColor = texture2D(uTexture, texCoord.st);\n  vec4 color = uColorMatrix * vec4(texColor.rgb, 1.);\n  color.a = texColor.a * uOpacity;\n\n  gl_FragColor = color;\n\n}"}z(rf,ff);ba(rf);
function sf(){this.a="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  gl_Position = vec4(aPosition, 0., 1.);\n  vTexCoord = aTexCoord;\n}"}z(sf,gf);ba(sf);
function tf(a,b){Me.call(this,a,b);this.a=document.createElement("CANVAS");this.a.height=a.clientHeight;this.a.width=a.clientWidth;this.a.className="ol-unselectable";a.insertBefore(this.a,a.childNodes[0]||j);this.m=new $c(a.clientHeight,a.clientWidth);this.b=cf(this.a,{alpha:p,antialias:i,depth:p,preserveDrawingBuffer:p,stencil:p});N(this.a,"webglcontextlost",this.pa,p,this);N(this.a,"webglcontextrestored",this.Yb,p,this);this.f=new Wc(1,1,1,1);this.j=this.n=j;this.i={};this.g={};this.l={};this.J=
rf.ka();this.P=sf.ka();this.p={};uf(this)}z(tf,Me);r=tf.prototype;r.ua=function(a){tf.h.ua.call(this,a);a.F()&&Y(this.map)};
function qf(a,b){var c=a.b,d=b.src,e=a.l[d];u(e)?(c.bindTexture(3553,e.sb),9729!=e.kb&&(c.texParameteri(3553,10240,9729),e.kb=9729),9729!=e.lb&&(c.texParameteri(3553,10240,9729),e.lb=9729)):(e=c.createTexture(),c.bindTexture(3553,e),c.texImage2D(3553,0,6408,6408,5121,b),c.texParameteri(3553,10240,9729),c.texParameteri(3553,10241,9729),c.texParameteri(3553,10242,33071),c.texParameteri(3553,10243,33071),a.l[d]={sb:e,kb:9729,lb:9729})}r.X=Yb;r.Ca=function(a){return a instanceof Ue?new nf(this,a):j};
r.k=function(){var a=this.b;a.isContextLost()||(Ga(this.g,function(b){a.deleteProgram(b)}),Ga(this.i,function(b){a.deleteShader(b)}),Ga(this.l,function(b){a.deleteTexture(b.sb)}));tf.h.k.call(this)};function pf(a,b,c){var d=x(b)+"/"+x(c);if(d in a.g)return a.g[d];var e=a.b,f=e.createProgram();e.attachShader(f,vf(a,b));e.attachShader(f,vf(a,c));e.linkProgram(f);return a.g[d]=f}
function vf(a,b){var c=x(b);if(c in a.i)return a.i[c];var d=a.b,e=d.createShader(b.b());d.shaderSource(e,b.a);d.compileShader(e);return a.i[c]=e}r.bb=function(){var a=this.map.rb();this.f=new Wc(a.d/255,a.c/255,a.b/255,a.a/255);Y(this.map)};r.da=function(){tf.h.da.call(this);Y(this.map)};r.Sb=function(){Y(this.map)};r.ea=function(){tf.h.ea.call(this);Y(this.map)};r.fa=function(){tf.h.fa.call(this);Y(this.map)};r.ga=function(){tf.h.ga.call(this);Y(this.map)};
r.pa=function(a){a.o();this.j=this.n=j;this.i={};this.g={};this.l={};Ga(this.z,function(a){a.pa()})};r.Yb=function(){uf(this);Y(this.map)};function uf(a){a=a.b;a.activeTexture(33984);a.blendFunc(770,771);a.disable(2884);a.disable(2929);a.disable(3089)}r.Oa=function(a){tf.h.Oa.call(this,a);a.F()&&Y(this.map)};r.wa=function(a){var b=tf.h.wa.call(this,a);b!==j&&(a=x(a),P(this.p[a]),delete this.p[a]);return b};
r.Q=function(a){if(this.map.w()){var b=p;Pe(this,function(c,d){d.Q(a)&&(b=i)});var c=this.map.c();this.m.width==c.width&&this.m.height==c.height||(this.a.width=c.width,this.a.height=c.height,this.m=c);var d=this.b;d.bindFramebuffer(36160,j);d.clearColor(this.f.d,this.f.c,this.f.b,this.f.a);d.clear(16384);d.enable(3042);d.viewport(0,0,c.width,c.height);c=pf(this,this.J,this.P);d.useProgram(c);this.n===j&&(this.n={aa:d.getAttribLocation(c,"aPosition"),ba:d.getAttribLocation(c,"aTexCoord"),sc:d.getUniformLocation(c,
"uColorMatrix"),tc:d.getUniformLocation(c,"uMatrix"),uc:d.getUniformLocation(c,"uOpacity"),Ta:d.getUniformLocation(c,"uTexture")});this.j===j?(c=d.createBuffer(),d.bindBuffer(34962,c),d.bufferData(34962,new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),35044),this.j=c):d.bindBuffer(34962,this.j);d.enableVertexAttribArray(this.n.aa);d.vertexAttribPointer(this.n.aa,2,5126,p,16,0);d.enableVertexAttribArray(this.n.ba);d.vertexAttribPointer(this.n.ba,2,5126,p,16,8);d.uniform1i(this.n.Ta,0);Pe(this,
function(a,b){d.uniformMatrix4fv(this.n.tc,p,b.d);d.uniformMatrix4fv(this.n.sc,p,kf(b));d.uniform1f(this.n.uc,a.b());d.bindTexture(3553,b.i);d.drawArrays(5,0,4)},this);b&&te(this.map)}};r.Ra=function(a,b){tf.h.Ra.call(this,a,b);var c=x(a);this.p[c]=N(b,"change",this.Sb,p,this)};var wf=["webgl","dom"],of="postrender",Ne="backgroundColor",ie="center",he="layers",je="resolution",Oe="rotation",ke="size";
function $(a){var b,c;S.call(this);var d={};u(a.center)&&(d[ie]=a.center);d[he]=u(a.jb)?a.jb:new Rb;d.projection=a.A!=j?ea(a.A)?zd(a.A):a.A:zd("EPSG:3857");u(a.xa)?d[je]=a.xa:u(a.zoom)&&(d[je]=Dd/(128<<a.zoom));d.userProjection=a.Ua!=j?ea(a.Ua)?zd(a.Ua):a.Ua:zd("EPSG:4326");c=Me;var e;e=u(a.oc)?a.oc:u(a.nc)?[a.nc]:wf;var f;for(f=0;f<e.length;++f)if(b=e[f],"dom"==b){if(Yb()){c=Ye;break}}else if("webgl"==b&&df()){c=tf;break}if(u(a.Qa)){var g=a.Qa;e=function(a,b){if(u(a)){var c=Xc(g,a),c=Math.min(Math.max(c+
b,0),g.length-1);return g[c]}}}else{u(a.cc)&&u(a.fc)&&u(a.xc)?(e=a.cc,f=a.fc,b=a.xc):(e=Dd/128,f=116,b=Math.exp(Math.log(2)/4));var k=b,m=e,s=f-1;e=function(a,b){if(u(a)){var c=Math.floor(Math.log(m/a)/Math.log(k)+0.5),c=Math.max(c+b,0);u(s)&&(c=Math.min(c,s));return m/Math.pow(k,c)}}}f=new Zc(e);u(a.controls)?e=a.controls:(e=new Rb,e.push(new be({})),e.push(new le({ab:u(a.Va)?a.Va:4})));if(u(a.$b))b=a.$b;else{b=new Rb;(u(a.rotate)?a.rotate:1)&&b.push(new ue(oe));if(u(a.Fb)?a.Fb:1)b.push(new ne(u(a.Va)?
a.Va:4));(u(a.Gb)?a.Gb:1)&&b.push(new se(pe));var n=u(a.bc)?a.bc:80;if(u(a.ac)?a.ac:1)b.push(new ze(n)),b.push(new Ae);if(u(a.dc)?a.dc:1)b.push(new Be(u(a.ec)?a.ec:1));(u(a.rc)?a.rc:1)&&b.push(new xe(qe))}a=ea(a.target)?document.getElementById(a.target):a.target;this.Ya=Cd;this.vb=yd;this.g=new $b(this.mc,h,this);lb(this,this.g);this.i=0;this.m=p;this.J=a;this.t=f;this.d=oc("DIV","ol-viewport");this.d.style.position="relative";this.d.style.overflow="hidden";this.d.style.width="100%";this.d.style.height=
"100%";this.J.appendChild(this.d);this.P=oc("DIV","ol-overlaycontainer");N(this.P,["click",Vc?"touchstart":"mousedown"],pb);this.d.appendChild(this.P);a=new kd(this);N(a,[md,nd,pd,qd,od],this.nb,p,this);lb(this,a);a=new wc(document);N(a,"key",this.cb,p,this);lb(this,a);a=new Sc(this.d);N(a,"mousewheel",this.cb,p,this);lb(this,a);this.I=e;N(this.I,"add",this.Qb,p,this);N(this.I,"remove",this.Rb,p,this);this.xb=b;this.f=new c(this.d,this);lb(this,this.f);this.Cb=new rc;N(this.Cb,"resize",this.eb,p,
this);N(this,T("projection"),this.Vb,p,this);N(this,T("userProjection"),this.Xb,p,this);this.Xa(d);this.eb();this.I.forEach(function(a){a.D(this)},this)}z($,S);$.prototype.k=function(){pc(this.d);$.h.k.call(this)};$.prototype.rb=function(){return V(this,Ne)};$.prototype.getBackgroundColor=$.prototype.rb;$.prototype.b=function(){return V(this,ie)};$.prototype.getCenter=$.prototype.b;
function de(a){if(a.w()){var b=a.b(),c=a.a(),a=a.c();return new bd(b.x-c*a.width/2,b.y-c*a.height/2,b.x+c*a.width/2,b.y+c*a.height/2)}}function we(a,b){if(a.w()){var c=a.f;id(c);var d=[b.x,b.y,0];jd(c.c,d,d);return new ed(d[0],d[1])}}$.prototype.l=function(){return V(this,"projection")};$.prototype.getProjection=$.prototype.l;$.prototype.a=function(){return V(this,je)};$.prototype.getResolution=$.prototype.a;
function Xe(a){var b=a.b(),c=a.a(),d=a.e()||0,e=a.c(),a=c*e.width/2,c=c*e.height/2,c=[new W(-a,-c),new W(-a,c),new W(a,-c),new W(a,c)];C(c,function(a){a.rotate(d);a.add(b)});return cd.apply(j,c)}$.prototype.e=function(){return V(this,Oe)||0};$.prototype.getRotation=$.prototype.e;$.prototype.c=function(){return V(this,ke)};$.prototype.getSize=$.prototype.c;$.prototype.ub=function(){return V(this,"userProjection")};$.prototype.getUserProjection=$.prototype.ub;r=$.prototype;
r.cb=function(a,b){this.nb(new fd(b||a.type,this,a))};r.Qb=function(a){a.a.D(this)};r.Rb=function(a){a.a.D(j)};r.nb=function(a){var b=this.xb.a;if(Q(this,a)!==p)for(var c=b.length-1;0<=c&&!(b[c].b(a),a.ma);c--);};r.Vb=function(){xf(this)};r.Xb=function(){xf(this)};r.eb=function(){this.Wa(new $c(this.J.clientWidth,this.J.clientHeight))};r.w=function(){var a;if(a=this.b()!=j)if(a=u(this.a()))a=this.c()!=j;return a};
function xf(a){var b=a.l(),c=a.ub();b!=j&&c!=j?(a.vb=Bd(b,c),a.Ya=Bd(c,b)):(a.vb=yd,a.Ya=Cd)}function Y(a){a.g.a==j&&(0===a.i?(a=a.g,ac(a),a.d()):a.m=i)}
function te(a){if(0===a.i){if(a.g.a==j){a=a.g;ac(a);a.e=p;var b=bc(a),c=cc(a);if(b&&!c&&a.b.mozRequestAnimationFrame)a.a=N(a.b,"MozBeforePaint",a.c),a.b.mozRequestAnimationFrame(j),a.e=i;else{if(b&&c)b=b.call(a.b,a.c);else{var d=a.c,e;e=e||0;b=a.b.setTimeout(function(){return d.apply(this,Array.prototype.slice.call(arguments,0,e))},20)}a.a=b}}}else a.m=i}r.mc=function(a){0==this.i&&(this.f.Q(a),this.m=p,Q(this,of))};r.rotate=function(a,b){a=this.t.a(a,b);this.Y(a)};r.qc=function(a){this.set(Ne,a)};
$.prototype.setBackgroundColor=$.prototype.qc;$.prototype.j=function(a){this.set(ie,a)};$.prototype.setCenter=$.prototype.j;$.prototype.zb=function(a){this.set(he,a)};$.prototype.setLayers=$.prototype.zb;$.prototype.yb=function(a){this.set("projection",a)};$.prototype.setProjection=$.prototype.yb;$.prototype.p=function(a){this.set(je,a)};$.prototype.setResolution=$.prototype.p;$.prototype.Y=function(a){this.set(Oe,a)};$.prototype.setRotation=$.prototype.Y;$.prototype.Wa=function(a){this.set(ke,a)};
$.prototype.setSize=$.prototype.Wa;$.prototype.Bb=function(a){this.set("userProjection",a)};$.prototype.setUserProjection=$.prototype.Bb;function ye(a,b,c){++a.i;try{b.call(c)}finally{0===--a.i&&a.m&&(a=a.g,ac(a),a.d())}}$.prototype.zoom=function(a,b){var c=this.t.xa(this.a(),a);if(c!=j&&b!=j){var d=this.b(),e=this.a(),f=new W(b.x-c*(b.x-d.x)/e,b.y-c*(b.y-d.y)/e);ye(this,function(){this.j(f);this.p(c)},this)}else this.p(c)};function yf(a){var b=Array(a.W+1),c;for(c=0;c<=a.W;++c)b[c]=Dd/(128<<c);Pd.call(this,{B:Ed,origin:new W(-Dd,Dd),Qa:b,tb:new $c(256,256)})}z(yf,Pd);yf.prototype.c=function(a,b,c){for(var d=a.x,e=a.y,a=a.q,f;;){a-=1;if(0>a)break;d=Math.floor(d/2);e=Math.floor(e/2);f=new Nd(d,e,d,e);if(b.call(c,a,f))break}};function zf(a){var b=a.A||zd("EPSG:3857"),c=Zd;u(a.$)?c=a.$:u(a.wc)?c=Yd(Ba(a.wc,Xd)):u(a.url)&&(c=Xd(a.url));var d=new yf({W:a.W}),e=a.B,c=e!=j?$d(function(b){if(a.W<b.q)return j;var c=1<<b.q,k=-b.y-1;if(0>k||c<=k)return j;var c=Tb(b.x,c),m=Qd(d,new Ld(b.q,c,b.y));return!(m.b<=e.c&&m.c>=e.b&&m.a<=e.d&&m.d>=e.a)?j:new Ld(b.q,c,k)},c):$d(function(b){if(a.W<b.q)return j;var c=1<<b.q,d=-b.y-1;return 0>d||c<=d?j:new Ld(b.q,Tb(b.x,c),d)},c);fe.call(this,{U:a.U,crossOrigin:a.crossOrigin,B:a.B,A:b,S:d,$:c})}
z(zf,fe);function Af(){zf.call(this,{U:[new Wd],W:18,url:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}z(Af,zf);var Bf=new Ue({source:new Af});new $({center:new W(55,37),jb:new Rb([Bf]),target:"map",zoom:5});(function() {

var plovr = plovr || {};

/** @typedef {input:string,message:string,isError:boolean,lineNumber:number} */
plovr.CompilationError;

plovr.htmlEscape = function(str) {
  return str.replace(/[&<"]/g, function(ch) {
    switch (ch) {
      case '&': return '&amp;';
      case '<': return '&lt;';
      case '"': return '&quot;';
    }
  });
};

plovr.ERROR_STYLE =
  'color: #A00;' +
  'background-color: #FFF;' +
  'font-family: monospace;' +
  'font-size: 12px;' +
  'border: 1px solid #A00;' +
  'padding: 1px 3px;'

plovr.WARNING_STYLE =
  'color: #F29000;' +
  'background-color: #FFF;' +
  'font-family: monospace;' +
  'font-size: 12px;' +
  'border: 1px solid #F29000;' +
  'padding: 1px 3px;'

/**
 * @type {Array.<plovr.CompilationError>}
 */
plovr.errors_ = [];

/**
 * @param {Array.<plovr.CompilationError>} errors
 */
plovr.addErrors = function(errors) {
  for (var i = 0; i < errors.length; i++) plovr.errors_.push(errors[i]);
};

/**
 * @type {Array.<plovr.CompilationError>}
 */
plovr.warnings_ = [];

/**
 * @param {Array.<plovr.CompilationError>} errors
 */
plovr.addWarnings = function(warnings) {
  for (var i = 0; i < warnings.length; i++) plovr.warnings_.push(warnings[i]);
};

/** @type {string} */
plovr.configId_ = '';

/** @return {string} */
plovr.getConfigId = function() {
  return plovr.configId_;
};

/** @param {string} */
plovr.setConfigId = function(configId) {
  plovr.configId_ = configId;
};

/** @type {string} */
plovr.viewSourceUrl_ = '';

/** @param {string} viewSourceUrl */
plovr.setViewSourceUrl = function(viewSourceUrl) {
  plovr.viewSourceUrl_ = viewSourceUrl;
};

/** @return {string} */
plovr.getViewSourceUrl = function() {
  return plovr.viewSourceUrl_;
};

/**
 * @param {Array.<plovr.CompilationError>} errors
 * @param {Array.<string>} html
 * @param {string} style
 */
plovr.writeErrors_ = function(errors, html, style) {
  for (var i = 0, len = errors.length; i < len; i++) {
    var error = errors[i];
    var message = error['message'];

    // Check whether the message starts with the name followed by a line number,
    // and if so, hyperlink it.
    var prefix = error['input'] + ':' + error['lineNumber'] + ':';
    var anchor;
    if (message.indexOf(prefix) == 0) {
      message = message.substring(prefix.length);
      anchor = '<a target="_blank" ' +
          'href="' + plovr.getViewSourceUrl() +
          '?id=' + encodeURIComponent(plovr.getConfigId()) +
          '&name=' + encodeURIComponent(error['input']) +
          '#' + error['lineNumber'] + '">' +
          plovr.htmlEscape(prefix) +
          '</a>';
    } else if (error['input']) {
      // This is likely a Soy error, which is less likely to include line
      // numbers or the clear ERROR/WARNING text provided by the Compiler.
      anchor = '<a target="_blank" ' +
          'href="' + plovr.getViewSourceUrl() +
          '?id=' + encodeURIComponent(plovr.getConfigId()) +
          '&name=' + encodeURIComponent(error['input']) + '">' +
          plovr.htmlEscape(error['input']) +
          ':</a> ' +
          (style == plovr.ERROR_STYLE ? 'ERROR' : 'WARNING') +
          ' - ';
    }

    var htmlMessage = plovr.htmlEscape(message);
    htmlMessage = htmlMessage.replace(/\n/g, '<br>');

    if (anchor) {
      htmlMessage = anchor + htmlMessage;
    }
    html.push('<div style="', style, '">', htmlMessage, '</div>');
  }
};

/**
 * Writes the errors into a DIV as the first child of the BODY, so the BODY must
 * be available when this is run.
 */
plovr.writeErrors = function() {
  // TODO(bolinfest): Make it possible to expand and collapse errors.

  var div = document.createElement('div');

  // Give div its own CSS class (plovr-error-report) so that users can style it.
  // For example, they may need to change the position or the z-index:
  //
  // http://code.google.com/p/plovr/issues/detail?id=34
  //
  // A class is used rather than an id in case there are multiple plovr configs
  // loaded on the same page. An additional CSS class is included (parameterized
  // by config id) so that multiple config error boxes can be styled separately.
  var configId = plovr.getConfigId();
  div.className = 'plovr-error-report plovr-error-report-config-id-' + configId;

  var html = [];
  plovr.writeErrors_(plovr.errors_, html, plovr.ERROR_STYLE);
  plovr.writeErrors_(plovr.warnings_, html, plovr.WARNING_STYLE);

  div.innerHTML = html.join('');
  document.body.insertBefore(div, document.body.firstChild);
}

plovr.writeErrorsOnLoad = function() {
  if (document.body) {
    plovr.writeErrors();
  } else if (window.addEventListener) {
    window.addEventListener('load', plovr.writeErrors, false);
  } else if (window.attachEvent) {
    window.attachEvent('onload', plovr.writeErrors);
  }
};

window['plovr'] = plovr;

})();
plovr.addErrors([]);
plovr.addWarnings([]);
plovr.setConfigId("full-screen");
plovr.setViewSourceUrl("http://localhost:9810/view");
plovr.writeErrorsOnLoad();
